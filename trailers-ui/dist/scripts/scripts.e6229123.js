function routes(a){a.when("/manage/markets",{templateUrl:"views/manage/markets/manage-markets.tpl.html",controller:"ManageMarketsController",controllerAs:"manageMarkets"}).when("/manage-theaters/show-markets",{templateUrl:"views/manage/theaters/list-markets.tpl.html",controller:"ListMarketsController",controllerAs:"vm"}).when("/manage-theaters/theaters",{templateUrl:"views/manage/theaters/manage-theaters.tpl.html",controller:"ManageTheatersController",controllerAs:"vm"}).when("/nrg/projects/manage",{templateUrl:"views/projects/nrg/nrg-projects.tpl.html",controller:"NrgProjectsController",controllerAs:"nrgProjectsController"}).when("/blank-survey",{templateUrl:"views/surveys/blank/blank-survey.tpl.html",controller:"BlankSurveyController",controllerAs:"blank"}).when("/fill-survey",{templateUrl:"views/surveys/fill/fill-survey.tpl.html",controller:"FillSurveyController",controllerAs:"fill"}).otherwise({redirectTo:"/blank-survey"})}function dataService(a,b,c){function d(c,d){var e=b+"/"+c;return angular.forEach(d,function(a,b){e=e+"&="+a}),a({url:e,method:"GET",header:{"User-Agent":"enriquezrene",Accept:"application/vnd.github.v3+json"},cache:!0}).then(function(a){return a.data})["catch"](f)}function e(a){return d("users/enriquezrene/repos",{})}function f(a){return c.error("XHR failed to SurveyService"),c.error(a),a}var g={getRepos:e};return g}angular.module("app",["app.routes","app.core","app.translate"]),angular.module("app.core",["app.services","ngAutocomplete","ui.bootstrap","ngResource"]),angular.module("app.routes",["ngRoute"]).config(routes),routes.$inject=["$routeProvider"],angular.module("app.services",[]),angular.module("app.translate",["pascalprecht.translate"]).config(["$translateProvider",function(a){a.translations("en",{"Menu.download.form":"Download Form","Menu.fill.form":"Fill Form","Basic.info.title":"Basic Information","Trailers.info.title":"Trailers","Btn.print.form":"Print Form","Label.name":"Name","Label.last.name":"Last Name","Label.email":"Email","Label.date":"Date","Label.city":"City","Label.theater":"Theater","Title.manage.markets":"Markets","Menu.manage.markets":"Manage Markets","Label.market.country":"Country","Label.market.name":"Market Name","Label.market.city":"City","Btn.add.market":"Save","Label.showtime":"Time","Label.order":"Order of Play","Label.seconds":"seconds","Btn.add.trailer":"Add trailer","Label.no.records":"No records added","Label.screen":"Screen","Label.movie.name":"Movie","Label.movie.format.2D":"2D","Label.movie.format.3D":"3D","Label.trailer.name":"Trailer Name","Label.trailer.distributor":"Distributor","Label.duration":"Length Duration","Label.actions":"Actions","Label.duration.classification":"Length Classification","Menu.manage.nrg.projects":"Projects","Btn.ok":"OK","Title.manage.theaters":"Theaters","Label.theater.name":"Theater Name","Label.theater.city":"Theater City","Label.theater.address":"Theater Address","Label.theater.website":"Theater Website","Menu.manage.theaters":"Manage Theaters","Label.manage.theaters.choose.market":"Choose a Market"}),a.translations("es",{"Menu.download.form":"Descargar Formulario","Menu.fill.form":"Llenar Formulario","Basic.info.title":"Informacion Basica","Trailers.info.title":"Comerciales","Btn.print.form":"Imprimir Formulario","Label.name":"Nombre","Label.last.name":"Apellido","Label.email":"Email","Label.date":"Fecha","Label.city":"Ciudad","Label.theater":"Teatro","Label.showtime":"Hora de la Funcion","Label.showtime":"Hora","Label.order":"Orden","Label.duration":"Duracion","Label.seconds":"segundos","Btn.add.trailer":"Añadir Trailer","Label.no.records":"No se han agregado registros"}),a.translations("de",{"Menu.download.form":"Formular herunterladen","Menu.fill.form":"Formular ausfüllen","Basic.info.title":"Grundlagen ","Trailers.info.title":"Anhänger","Btn.print.form":"Druckform","Label.name":"Vorname","Label.last.name":"Zuname","Label.email":"E-Mail","Label.date":"Datum","Label.city":"City","Label.theater":"Schauspielhaus","Label.showtime":"Performanz - Stunde","Label.order":"Verordnung","Label.duration":"Dauer","Label.seconds":"sekunden","Btn.add.trailer":"Beifügen Handels","Label.no.records":"Keine Datensätze hinzugefügt"}),a.translations("fr",{"Menu.download.form":"Télécharger Form","Menu.fill.form":"Remplissez le formulaire","Basic.info.title":"Informations de base","Trailers.info.title":"Remorques","Btn.print.form":"Print Form","Label.name":"Nom","Label.last.name":"Le Nom","Label.email":"Email","Label.date":"Date","Label.city":"City","Label.theater":"Theater","Label.showtime":"Showtime Hour","Label.order":"Ordre","Label.duration":"Durée","Label.seconds":"secondes","Btn.add.trailer":"Ajouter commerciale","Label.no.records":"No records ajoutés"}),a.translations("it",{"Menu.download.form":"Scarica il modulo","Menu.fill.form":"Compilare il modulo","Basic.info.title":"Informazioni di base","Trailers.info.title":"Trailers","Btn.print.form":"Modulo di stampa","Label.name":"Nome","Label.last.name":"Cognome","Label.email":"e-mail","Label.date":"Data","Label.city":"City","Label.theater":"Teatro","Label.showtime":"Showtime Hour","Label.order":"Ordine","Label.duration":"Durata","Label.seconds":"secondi","Btn.add.trailer":"Aggiungi commerciale","Label.no.records":"Non ci sono record aggiunti"}),a.preferredLanguage("en")}]),angular.module("app.core").controller("BlankSurveyController",function(){var a=this;a.calendar_open=!1,a.date=void 0,a.date_picker_options={formatYear:"yy",startingDay:1},a.date_picker_alt_input_formats=["d!/M!/yyyy"],a.show_calendar=function(){a.calendar_open=!0}}),angular.module("app.core").controller("FillSurveyController",function(){function a(){b.trailers_entered.sort(function(a,b){return a.trailer_order<b.trailer_order?-1:a.trailer_order>b.trailer_order?1:0})}var b=this;b.calendar_open=!1,b.trailer={};var c=-1;b.date=void 0,b.date_picker_options={formatYear:"yy",startingDay:1},b.date_picker_alt_input_formats=["d!/M!/yyyy"],b.show_calendar=function(){b.calendar_open=!0},b.options={types:"(cities)"},b.trailers_entered=[{trailer_order:1,trailer_name:"Star Wars II",trailer_duration:90,trailer_distributor:"Universal World"},{trailer_order:2,trailer_name:"Pocahontas",trailer_duration:30,trailer_distributor:"Disney"}],b.trailer_down=function(c){var d=c.trailer_order,e=b.trailers_entered.indexOf(c);if(e!=b.trailers_entered.length-1){var f=b.trailers_entered[e+1];c.trailer_order=f.trailer_order,f.trailer_order=d,a()}},b.trailer_up=function(c){var d=c.trailer_order,e=b.trailers_entered.indexOf(c);if(0!=e){var f=b.trailers_entered[e-1];c.trailer_order=f.trailer_order,f.trailer_order=d,a()}},b.add_trailer=function(){c>=0?(b.trailers_entered.splice(c,1,b.trailer),c=-1):b.trailers_entered.push(b.trailer),a(),b.trailer={}},b.edit_trailer=function(a){c=b.trailers_entered.indexOf(a),b.trailer=angular.copy(a)},b.remove_trailer=function(a){var c=b.trailers_entered.indexOf(a);-1!==c&&b.trailers_entered.splice(c,1)}}),angular.module("app.core").controller("i18nCtrl",["$translate","$scope",function(a,b){b.changeLanguage=function(b){a.use(b)}}]),angular.module("app.core").controller("ManageMarketsController",["marketsService","$http",function(a,b){function c(){b.get("_iso_3166_alpha2.json").success(function(a){e.country_codes=a}),e.markets=[],d()}function d(){a.list().then(function(a){e.markets=a})}var e=this;e.market={},function(){c()}(),e.saveMarket=function(){this.marketId?a.update(this.marketId,e.market).then(function(a){this.marketId=null,d()}):a.save(e.market).then(function(a){d()}),e.market={}},e.edit=function(a){e.market=angular.copy(a),this.marketId=e.market.marketId},e["delete"]=function(b){var c=b.marketId;a["delete"](c).then(function(a){d()})}}]),angular.module("app.core").controller("ListMarketsController",["marketsService","$scope","$location",function(a,b,c){function d(){a.list().then(function(a){e.markets=a})}var e=this;!function(){d()}(),e.chooseMarket=function(a){b.selectedMarket=a,c.path("/manage-theaters/theaters").search({marketId:a.marketId})}}]),angular.module("app.core").controller("ManageTheatersController",["marketsService","$routeParams","theatersService",function(a,b,c){function d(){f.theaters=[],g=b.marketId,e()}function e(){c.list(g).then(function(a){f.theaters=a})}var f=this,g=null;f.theater={},function(){d()}(),f.save=function(){console.log(f.theater.theaterId),console.log(!f.theater.theaterId),f.theater.theaterId?c.update(g,f.theater.theaterId,f.theater).then(function(a){e()}):c.save(g,f.theater).then(function(a){e()}),f.theater={}},f.edit=function(a){f.theater=angular.copy(a)},f["delete"]=function(a){var b=a.theaterId;c["delete"](g,b).then(function(a){e()})}}]),angular.module("app").directive("bsActiveLink",["$location",function(a){return{restrict:"A",replace:!1,link:function(b,c){b.$on("$routeChangeSuccess",function(){var b=["/#"+a.path(),"#"+a.path(),a.path()];angular.forEach(c.find("a"),function(a){a=angular.element(a),-1!==b.indexOf(a.attr("href"))?a.parent().addClass("active"):a.parent().removeClass("active")})})}}}]),angular.module("ngAutocomplete",[]).directive("ngAutocomplete",function(){return{require:"ngModel",scope:{ngModel:"=",options:"=?",details:"=?"},link:function(a,b,c,d){var e,f=!1,g=function(){e={},a.options&&(f=a.options.watchEnter!==!0?!1:!0,a.options.types?(e.types=[],e.types.push(a.options.types),a.gPlace.setTypes(e.types)):a.gPlace.setTypes([]),a.options.bounds?(e.bounds=a.options.bounds,a.gPlace.setBounds(e.bounds)):a.gPlace.setBounds(null),a.options.country?(e.componentRestrictions={country:a.options.country},a.gPlace.setComponentRestrictions(e.componentRestrictions)):a.gPlace.setComponentRestrictions(null))};void 0==a.gPlace&&(a.gPlace=new google.maps.places.Autocomplete(b[0],{})),google.maps.event.addListener(a.gPlace,"place_changed",function(){var c=a.gPlace.getPlace();void 0!==c&&(void 0!==c.address_components?a.$apply(function(){a.details=c,d.$setViewValue(b.val())}):f&&h(c))});var h=function(c){var e=new google.maps.places.AutocompleteService;c.name.length>0&&e.getPlacePredictions({input:c.name,offset:c.name.length},function(c,e){if(null==c||0==c.length)a.$apply(function(){a.details=null});else{var f=new google.maps.places.PlacesService(b[0]);f.getDetails({reference:c[0].reference},function(c,e){e==google.maps.GeocoderStatus.OK&&a.$apply(function(){d.$setViewValue(c.formatted_address),b.val(c.formatted_address),a.details=c;b.on("focusout",function(a){b.val(c.formatted_address),b.unbind("focusout")})})})}})};d.$render=function(){var a=d.$viewValue;b.val(a)},a.watchOptions=function(){return a.options},a.$watch(a.watchOptions,function(){g()},!0)}}}),angular.module("app.services").service("securityService",["$http",function(a){var b="http://localhost:8080/trailers/v1";this.get=function(c){return a.get(b+c)},this["delete"]=function(c){return a["delete"](b+c)},this.post=function(c,d){var e=b+c;return a.post(e,d)},this.put=function(c,d){var e={};e.headers={"Content-Type":"application/json"};var f=b+c;return a.put(f,d,e)}}]),angular.module("app.services").service("theatersService",["securityService",function(a){this.save=function(b,c){return a.post("/theaters/"+b,c).then(function(a){return a.data})},this.update=function(b,c,d){return a.put("/theaters/"+b+"/"+c,d).then(function(a){return a.data})},this["delete"]=function(b,c){return a["delete"]("/theaters/"+b+"/"+c).then(function(a){return a.data})},this.list=function(b){return a.get("/theaters?marketId="+b).then(function(a){return a.data})}}]),angular.module("app.services").constant("GH_BASE_URL","https://api.github.com").factory("SurveyService",dataService),dataService.$inject=["$http","GH_BASE_URL","$log"],angular.module("app.services").service("marketsService",["securityService",function(a){this.save=function(b){return a.post("/markets",b).then(function(a){return a.data})},this.update=function(b,c){return a.put("/markets/"+b,c).then(function(a){return a.data})},this["delete"]=function(b){return a["delete"]("/markets/"+b).then(function(a){return a.data})},this.list=function(){return a.get("/markets").then(function(a){return a.data})}}]),angular.module("app.core").directive("checkOrder",function(){return{restrict:"A",scope:{},require:"ngModel",link:function(a,b,c,d){d.$validators.checkOrder=function(b){if(void 0!=b){b.trim();for(var c in a.trailers_entered)if(c.trailer_order==order)return!1;return!0}}}}});